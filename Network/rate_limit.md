# 처리율 제한 장치 설계

## 처리율 제한 장치 정의
처리율 제한 장치는 클라이언트 또는 서비스가 보내는 트래픽의 처리율을 제어하기 위한 장치다. HTTP를 예로 들면, 이 장치는 특정 기간 내에 전송되는 클라이언트의 요청 횟수를 제한한다. 요청 횟수가 임계치를 넘어가면 모든 호출은 처리가 중단된다. 
예들들면 다음과 같은 상황이 있다.
- 사용자는 초당 2회 이상 새 글을 올릴 수 없다.
- 같은 IP 주소로는 하루에 10개 이상의 계정을 생성할 수 없다.
- 같은 디바이스로는 주당 5회 이상 리워드를 요청할 수 없다.

## 처리율 제한 장치를 두는 이유
- DoS(Denial of Service) 공격에 의한 자원 고갈(resource starvation)을 방지할 수 있다. 대형 IT 기업들이 공개한 거의 대부분의 API는 처리율 제한 장치를 갖는다. 예를 들어 트위터는 3시간 동안 300개의 트윗만 올릴 수 있고, 구글 독스는 사용자당 분당 300회의 read 요청만 허용한다. 처리율 제한 장치는 추가 요청은 중단시켜 DoS 공격을 방지한다.
- 비용을 절감한다. 3rd party API에 사용료를 지불하고 있는 회사들에게는 중요한 이슈이다. 예를 들어 신용을 확인하거나, 신용카드 결제를 하는 등의 API 호출에 대한 과금이 횟수로 이루어진다면, 그 횟수를 제한할 수 있어야 비용을 절감할 수 있을 것이다. 
- 서버 과부화를 막는다. 봇에서 오는 트래픽이나 사용자의 잘못된 이용 패턴으로 유발된 트래픽을 걸러내는데 처리율 제한 장치를 활용할 수 있다. 

